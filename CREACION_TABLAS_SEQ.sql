-------------------------USUARIOS------------------------
-----------SEQUENCIA-----------
CREATE SEQUENCE USUARIOS_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
-----------TABLA----------------
CREATE TABLE USUARIOS
    (
    "ID_USUARIO" NUMBER  DEFAULT USUARIOS_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40),
    "EMAIL" VARCHAR(70),
    "NOMBRE_USUARIO" VARCHAR(70),
    "PASSWORD" VARCHAR(70),
    CONSTRAINT "PK_USUARIOS" PRIMARY KEY ("ID_USUARIO")
    );

-------------------------ROLES------------------------
-----------SEQUENCIA-----------
CREATE SEQUENCE ROLES_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
-----------TABLA----------------
CREATE TABLE ROLES
    (
    "ID_ROL" NUMBER  DEFAULT ROLES_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40),
    CONSTRAINT "PK_ROLES" PRIMARY KEY ("ID_ROL")
    );

-------------------------USUARIOS_ROLES------------------------
-----------TABLA----------------
CREATE TABLE USUARIOS_ROLES
    (
    "ID_USUARIO" NUMBER(*,0) NOT NULL ENABLE,
    "ID_ROL" NUMBER(*,0) NOT NULL ENABLE,
    CONSTRAINT "FK_USUARIOS_ROLES_USUARIOS_01" FOREIGN key (ID_USUARIO)
    REFERENCES USUARIOS(ID_USUARIO),
    CONSTRAINT "FK_USUARIOS_ROLES_ROLES_02" FOREIGN key (ID_ROL)
    REFERENCES ROLES(ID_ROL)
    );














-------------------------TIPOS DE CLIENTE------------------------
-----------SEQUENCIA-----------
CREATE SEQUENCE TIPOS_CLIENTE_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;  
-----------TABLA----------------
CREATE TABLE TIPOS_CLIENTE
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_TIPO_CLIENTE" NUMBER  DEFAULT TIPOS_CLIENTE_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40),
    "PRIORIDAD" NUMBER NOT NULL,
    CONSTRAINT "PK_TIPOS_CLIENTE" PRIMARY KEY ("ID_TIPO_CLIENTE")
    );

------------------------------------ZONAS---------------------------------------
-----------SEQUENCIA-----------
CREATE SEQUENCE ZONAS_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
  
-------------TABLA------------
CREATE TABLE ZONAS
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_ZONA" NUMBER  DEFAULT ZONAS_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40) UNIQUE,
    CONSTRAINT "PK_ZONAS" PRIMARY KEY ("ID_ZONA")
    );


----------------------------------CLIENTES--------------------------------------
---------SECUENCIA----------

CREATE SEQUENCE CLIENTES_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
  
 -- ALTER SEQUENCE CLIENTE_SEQ NOCACHE NOCACHE;

--------------TABLA--------------

CREATE TABLE CLIENTES
   (
   "ID_CLIENTE" NUMBER(*,0) DEFAULT CLIENTES_SEQ.NEXTVAL NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(20), 
	"APELLIDO" VARCHAR2(20), 
    "IDENTIFICACION" VARCHAR2(20) UNIQUE, 
	"ID_TIPO_CLIENTE" NUMBER(*,0) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(100), 
	"TELEFONO" VARCHAR2(20), 
	"DIRECCION" VARCHAR2(40), 
	"ID_ZONA" NUMBER(*,0) NOT NULL ENABLE, 
    CONSTRAINT "PK_CLIENTES" PRIMARY KEY ("ID_CLIENTE"),
    CONSTRAINT FK_CLIENTES_TIPOS_CLIENTE_01 FOREIGN key (ID_TIPO_CLIENTE)
    REFERENCES TIPOS_CLIENTE(ID_TIPO_CLIENTE),
    CONSTRAINT FK_CLIENTES_ZONAS_02 FOREIGN key (ID_ZONA)
    REFERENCES ZONAS(ID_ZONA)
    );

 
 

  
 -----------------------------TIPOS DE DAÑO-------------------------------------
 --------------SECUENCIA-----------

CREATE SEQUENCE TIPOS_INCIDENCIA_SEQ
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
  
 -------------TABLA-------------

 CREATE TABLE TIPOS_INCIDENCIA
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_TIPO_INCIDENCIA" NUMBER  DEFAULT TIPOS_INCIDENCIA_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40),
    "PRIORIDAD" NUMBER,
    "TIEMPO_ATENCION" DATE,
    CONSTRAINT "PK_TIPOS_INCIDENCIA" PRIMARY KEY ("ID_TIPO_INCIDENCIA")
    );
    
 ------------------------------INCIDENCIAS-----------------------------------
 ----------SECUENCIA-----------
 
CREATE SEQUENCE INCIDENCIAS_seq
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
  
 ------------TABLA-------------

 CREATE TABLE INCIDENCIAS
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_INCIDENCIA" NUMBER  DEFAULT INCIDENCIAS_SEQ.NEXTVAL NOT NULL,
    "ID_CLIENTE"  NUMBER(*,0) NOT NULL ENABLE,
    "ID_TIPO_INCIDENCIA" NUMBER(*,0) NOT NULL ENABLE,
    "DESCRIPCION" VARCHAR2(150),
    "FECHA_REGISTRO" TIMESTAMP,
    CONSTRAINT "PK_REPORTE_DAÑO" PRIMARY KEY ("ID_INCIDENCIA"),
    CONSTRAINT "FK_INCIDENCIAS_CLIENTES_01" FOREIGN key (ID_CLIENTE)
    REFERENCES CLIENTES(ID_CLIENTE),
    CONSTRAINT "FK_INCIDENCIA_TIPOS_INCIDENCIA_02" FOREIGN key (ID_TIPO_INCIDENCIA)
    REFERENCES TIPOS_INCIDENCIA(ID_TIPO_INCIDENCIA)
    );
---------------------------ORDENES_ATENCION-------------------------------------    
 ----------SECUENCIA-----------

CREATE SEQUENCE ORDENES_ATENCION_seq
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
-------------TABLA--------------

CREATE TABLE ORDENES_ATENCION
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_ORDEN_ATENCION" NUMBER  DEFAULT ORDENES_ATENCION_SEQ.NEXTVAL NOT NULL,
    "ID_INCIDENCIA"  NUMBER(*,0) NOT NULL ENABLE UNIQUE,
    "NUMERO_ORDEN" VARCHAR2(150),
    "AGENDADO" NUMBER(1) DEFAULT 0 NOT NULL,
    CONSTRAINT "PK_ORDENES_ATENCION" PRIMARY KEY ("ID_ORDEN_ATENCION"),
    CONSTRAINT "FK_ORDENES_ATENCION_INCIDENCIAS_01" FOREIGN key (ID_INCIDENCIA)
    REFERENCES INCIDENCIAS(ID_INCIDENCIA)
    );
    
    

    
---------------------------CUADRILLAS------------------------------------    
 ----------SECUENCIA-----------    

CREATE SEQUENCE CUADRILLAS_seq
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
------------TABLA--------------

CREATE TABLE CUADRILLAS
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_CUADRILLA" NUMBER  DEFAULT CUADRILLAS_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR(40),
    "BORRADO" NUMBER(1) DEFAULT 0 NOT NULL,
    CONSTRAINT "PK_CUADRILLAS" PRIMARY KEY ("ID_CUADRILLA")
    );
 
-------------------------------TECNICOS-----------------------------------------    
----------SECUENCIA-----------

CREATE SEQUENCE TECNICOS_seq
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
-------------TABLA------------

 CREATE TABLE TECNICOS
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_TECNICO" NUMBER(10)  DEFAULT TECNICOS_SEQ.NEXTVAL NOT NULL,
    "NOMBRE" VARCHAR2(30),
    "APELLIDO" VARCHAR2(30),
    "IDENTIFICACION" NUMBER(20) NOT NULL,
    "EMAIL" VARCHAR2(100),
    "TELEFONO" VARCHAR2(15),
    "DIRECCION" VARCHAR2(15),
    "ID_CUADRILLA"  NUMBER(*,0) NOT NULL ENABLE,
    "BORRADO" NUMBER(1) DEFAULT 0 NOT NULL,
    CONSTRAINT "PK_TECNICOS" PRIMARY KEY ("ID_TECNICO"),
    CONSTRAINT "FK_TECNICOS_CUADRILLAS_01" FOREIGN key (ID_CUADRILLA)
    REFERENCES CUADRILLAS(ID_CUADRILLA)
    );

---------------------------AGENDA--------------------------------------------------    
 ----------SECUENCIA-----------

CREATE SEQUENCE AGENDAS_seq
  MINVALUE 1
  MAXVALUE 9999999999
  NOCACHE
  START WITH 1
  INCREMENT BY 1;
  ------------TABLA------------

 CREATE TABLE AGENDAS
    (
    --"ID" NUMBER  GENERATED BY DEFAULT AS IDENTITY (START WITH 1)NOT NULL,
    "ID_AGENDA" NUMBER  DEFAULT AGENDAS_SEQ.NEXTVAL NOT NULL,
    "ID_ORDEN_ATENCION"  NUMBER(*,0) NOT NULL ENABLE UNIQUE,
    "ID_TECNICO" NUMBER(*,0) NOT NULL ENABLE,
    "HORA_INICIO" DATE,
    "HORA_FIN" DATE,
    "FECHA" DATE,
    CONSTRAINT "PK_AGENDAS" PRIMARY KEY ("ID_AGENDA"),
    CONSTRAINT "FK_AGENDAS_ORDENES_ATENCION_01" FOREIGN key (ID_ORDEN_ATENCION)
    REFERENCES ORDENES_ATENCION(ID_ORDEN_ATENCION),
    CONSTRAINT "FK_AGENDAS_TECNICOS_02" FOREIGN key (ID_TECNICO)
    REFERENCES TECNICOS(ID_TECNICO)
    );



-----------------------TIPOS_INCIDENCIA_TECNICOS-------------------------------- 

 CREATE TABLE TIPOS_INCIDENCIA_TECNICOS
    (
    "ID_TIPO_INCIDENCIA"  NUMBER(*,0) NOT NULL ENABLE,
    "ID_TECNICO"  NUMBER(*,0) NOT NULL ENABLE,
    CONSTRAINT "FK_TIPOS_INCIDENCIA_TECNICOS_TIPOS_INCIDENCIA_TECNICOS_01" FOREIGN key (ID_TIPO_INCIDENCIA)
    REFERENCES TIPOS_INCIDENCIA(ID_TIPO_INCIDENCIA),
    CONSTRAINT "FK_TIPOS_INCIDENCIA_TECNICOS_TECNICOS_02" FOREIGN key (ID_TECNICO)
    REFERENCES TECNICOS(ID_TECNICO)
    );

---------------------------ZONAS_CUADRILLAS------------------------------------- 

 CREATE TABLE ZONAS_CUADRILLAS
    (
    "ID_ZONA"  NUMBER(*,0) NOT NULL ENABLE,
    "ID_CUADRILLA"  NUMBER(*,0) NOT NULL ENABLE,
    CONSTRAINT "FK_ZONAS_CUADRILLAS_ZONAS_01" FOREIGN key (ID_ZONA)
    REFERENCES ZONAS(ID_ZONA),
    CONSTRAINT "FK_ZONAS_CUADRILLAS_CUADRILLAS_02" FOREIGN key (ID_CUADRILLA)
    REFERENCES CUADRILLAS(ID_CUADRILLA)
    );



------------------------------INDICES---------------------------------------
create unique index idx_tecnicos_01 on tecnicos(identificacion);
